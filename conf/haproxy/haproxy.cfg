global
	log				127.0.0.1:514  local0
	log				127.0.0.1:514  local1 notice
	#log /dev/log	local0
	#log /dev/log	local1 notice

	chroot			/var/lib/haproxy
	user			haproxy
	group			haproxy
	daemon
	tune.ssl.default-dh-param	2048

	stats socket	/run/haproxy/admin.sock mode 660 level admin expose-fd listeners
	stats timeout	30s

	# Default SSL material locations
	#ca-base /etc/ssl/certs
	ca-base /etc/server/ssl/certs
	#crt-base /etc/ssl/private
	crt-base /etc/server/ssl/private

	# Default ciphers to use on SSL-enabled listening sockets.
	# For more information, see ciphers(1SSL). This list is from:
	#  https://hynek.me/articles/hardening-your-web-servers-ssl-ciphers/
	# An alternative list with additional directives can be obtained from
	#  https://mozilla.github.io/server-side-tls/ssl-config-generator/?server=haproxy
	ssl-default-bind-ciphers           ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:RSA+AESGCM:RSA+AES:!aNULL:!MD5:!DSS
	ssl-default-bind-options	no-sslv3

defaults
	log				global
	mode			http
	option			httplog
	option			dontlognull
	option			httpchk
	option			log-health-checks
	option			forwardfor except 127.0.0.0/8
	option			http-server-close
	maxconn		2048

	timeout connect	5s
	timeout client	50s
	timeout server	50s
	# for long installation (ex nextcloud)
	#timeout connect   600s
	#timeout client    600s
	#timeout server    600s

	errorfile 400	/etc/haproxy/errors/400.http
	errorfile 403	/etc/haproxy/errors/403.http
	errorfile 408	/etc/haproxy/errors/408.http
	errorfile 500	/etc/haproxy/errors/500.http
	errorfile 502	/etc/haproxy/errors/502.http
	errorfile 503	/etc/haproxy/errors/503.http
	errorfile 504	/etc/haproxy/errors/504.http

listen stats
	bind			*:1777

	log				global
	mode			http
	maxconn			10

	option			contstats

	#stats			scope { <name> | "." }
	stats			enable
	stats			hide-version
	stats			refresh 5s
	stats			show-node
	stats			auth admin:ANVo87zj0m-HQ5
	stats			uri /haproxy-stats


# Look in /etc/haparoxy/conf-enabled to see extra enabled configuration files
